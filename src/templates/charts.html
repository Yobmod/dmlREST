
{% extends 'base.html' %}

<script>
{% block jquery %} //not needed unless doing jquery
var endpoint = '/charts/api/chart/data/'  //for using json api data via ajax, defined in view/url.py
//var data = "{{ customers }}"		//django renders data on pageload
//var defaultData = []
//var labels = [];
$.ajax({
    method: "GET",
    url: endpoint,
    success: function(data){			//takes data from the url specified in var endpoint
        labels = data.labels			//get from REST api view
        defaultData = data.default
		backgroundColor = data.colour_background		//JSON data defined in veiw
		borderColor = data.colour_border
		console.log(data)
        setChart()						//if GETs data then does setchart function
    },
    error: function(error_data){
        console.log("error")
        console.log(error_data)
    }
})

function setChart(){
	var ctx = document.getElementById("myChart");   //puts blank chart in this canvas
	var myChart = new Chart(ctx, {
	    type: 'polarArea',
	    data: {
	        labels: labels,		//labels chart (legends for pie / radial)
	        datasets: [{
	            //label: '# of Votes',		//nothing?
	            data: defaultData,
	            backgroundColor: [
	                'rgba(255, 99, 132, 0.2)',
	                'rgba(54, 162, 235, 0.2)',
	                'rgba(255, 206, 86, 0.2)',
	                'rgba(75, 192, 192, 0.2)',
	                'rgba(153, 102, 255, 0.2)',
	                'rgba(255, 159, 64, 0.2)'
	            ],
	            borderColor: [
	                'rgba(255,99,132,1)',
	                'rgba(54, 162, 235, 1)',
	                'rgba(255, 206, 86, 1)',
	                'rgba(75, 192, 192, 1)',
	                'rgba(153, 102, 255, 1)',
	                'rgba(255, 159, 64, 1)'
	            ],
	            borderWidth: 1
	        }]
	    },
	    options: {
	        scales: {
	            yAxes: [{
	                ticks: {
	                    beginAtZero:true
	                }
	            }]
	        }
	    }
	});

var ctx2 = document.getElementById("myChart2");
var myChart2 = new Chart(ctx2, {					//create chart at given ctx point
    type: 'bar',
    data: {
        labels: labels,     //label the chart x-axis
        datasets: [{
            label: labels,
            data: defaultData,
            backgroundColor: backgroundColor,
            borderColor: borderColor,
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});

var ctx3 = document.getElementById("myChart3");
var myChart3 = new Chart(ctx3, {					//create chart at given ctx point
    type: 'line',
    data: {
        labels: labels,     //label the chart x-axis
        datasets: [{
            label: labels,
            data: defaultData,
            backgroundColor: backgroundColor,
            borderColor: borderColor,
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});

var ctx4 = document.getElementById("myChart4");
var myChart4 = new Chart(ctx4, {					//create chart at given ctx point
    type: 'radar',
    data: {
        labels: labels,     //label the chart x-axis
        datasets: [{
            label: labels,
            data: defaultData,
            backgroundColor: backgroundColor,
            borderColor: borderColor,
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
}
{% endblock %}
</script>

{% block content %}

<div class='row'>
    <div class='col-sm-12'>
    	<h1>Hello World</h1>

		<div class='col-sm-6'>
            <canvas id="myChart" width="400" height="400"></canvas>
        </div>

        <div class='col-sm-6'>
            <canvas id="myChart2" width="400" height="400"></canvas>
        </div>

		<div class='col-sm-6'>
			<canvas id="myChart3" width="400" height="400"></canvas>
		</div>

		<div class='col-sm-6'>
			<canvas id="myChart4" width="400" height="400"></canvas>
		</div>

    </div>
</div>

{% endblock content %}
